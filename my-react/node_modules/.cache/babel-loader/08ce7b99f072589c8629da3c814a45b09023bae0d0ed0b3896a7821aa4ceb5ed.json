{"ast":null,"code":"import axios from'axios';import{useState}from'react';import{Modal,Button}from'react-bootstrap';import'./CreateUsuario.css';import{useNavigate}from\"react-router-dom\";// Ya lo tienes aquí\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const URI='http://localhost:8000/usuarios';const CompCreateUsuario=()=>{const[nombre,setNombre]=useState('');const[email,setEmail]=useState('');const[contrasena,setContrasena]=useState('');const[idRol,setIdRol]=useState(null);const[showModal,setShowModal]=useState(false);// Estado para controlar el modal\nconst[message,setMessage]=useState('');// Mensaje del modal\n// Usamos useNavigate para obtener la función navigate\nconst navigate=useNavigate();const store=async e=>{e.preventDefault();try{const token=localStorage.getItem(\"token\");await axios.post(URI,{nombre,email,contrasena,id_rol:idRol},{headers:{\"Authorization\":`Bearer ${token}`,\"Content-Type\":\"application/json\"}});setMessage(\"Usuario creado con éxito\");setShowModal(true);// Mostrar el modal de éxito\n}catch(error){console.error(\"Error al crear el usuario:\",error);if(error.response){console.log(\"Código de estado:\",error.response.status);console.log(\"Mensaje de error:\",error.response.data);}setMessage(\"Hubo un error al crear el usuario\");setShowModal(true);// Mostrar el modal de error\n}};const handleClose=()=>{setShowModal(false);// Cerrar el modal\nnavigate('/usuarios');// Redirige a la página de usuarios\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Crear Usuario\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:store,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:nombre,onChange:e=>setNombre(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",value:contrasena,onChange:e=>setContrasena(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"ID de Rol (Opcional)\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:idRol,onChange:e=>setIdRol(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar rol\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Administrador\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Usuario\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Crear\"})]}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:handleClose,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:message.startsWith(\"Error\")?\"¡Error!\":\"¡Éxito!\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:message}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleClose,children:\"Aceptar\"})})]})]});};export default CompCreateUsuario;","map":{"version":3,"names":["axios","useState","Modal","Button","useNavigate","jsx","_jsx","jsxs","_jsxs","URI","CompCreateUsuario","nombre","setNombre","email","setEmail","contrasena","setContrasena","idRol","setIdRol","showModal","setShowModal","message","setMessage","navigate","store","e","preventDefault","token","localStorage","getItem","post","id_rol","headers","error","console","response","log","status","data","handleClose","className","children","onSubmit","type","value","onChange","target","required","show","onHide","centered","Header","closeButton","Title","startsWith","Body","Footer","variant","onClick"],"sources":["C:/BibliotecaPublica/my-react/src/usuario/CreateUsuario.js"],"sourcesContent":["import axios from 'axios';\r\nimport { useState } from 'react';\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport './CreateUsuario.css';\r\nimport { useNavigate } from \"react-router-dom\"; // Ya lo tienes aquí\r\n\r\nconst URI = 'http://localhost:8000/usuarios';\r\n\r\nconst CompCreateUsuario = () => {\r\n    const [nombre, setNombre] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [contrasena, setContrasena] = useState('');\r\n    const [idRol, setIdRol] = useState(null); \r\n    const [showModal, setShowModal] = useState(false); // Estado para controlar el modal\r\n    const [message, setMessage] = useState(''); // Mensaje del modal\r\n\r\n    // Usamos useNavigate para obtener la función navigate\r\n    const navigate = useNavigate();\r\n\r\n    const store = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const token = localStorage.getItem(\"token\"); \r\n            await axios.post(\r\n                URI, \r\n                { \r\n                    nombre, \r\n                    email, \r\n                    contrasena, \r\n                    id_rol: idRol \r\n                }, \r\n                {\r\n                    headers: {\r\n                        \"Authorization\": `Bearer ${token}`, \r\n                        \"Content-Type\": \"application/json\" \r\n                    }\r\n                }\r\n            );\r\n            setMessage(\"Usuario creado con éxito\");\r\n            setShowModal(true); // Mostrar el modal de éxito\r\n        } catch (error) {\r\n            console.error(\"Error al crear el usuario:\", error);\r\n            if (error.response) {\r\n                console.log(\"Código de estado:\", error.response.status);\r\n                console.log(\"Mensaje de error:\", error.response.data);\r\n            }\r\n            setMessage(\"Hubo un error al crear el usuario\");\r\n            setShowModal(true); // Mostrar el modal de error\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setShowModal(false); // Cerrar el modal\r\n        navigate('/usuarios'); // Redirige a la página de usuarios\r\n    };\r\n\r\n    return (\r\n        <div className='container mt-5'>\r\n            <h3>Crear Usuario</h3>\r\n            <form onSubmit={store}>\r\n                <div className='mb-3'>\r\n                    <label className='form-label'>Nombre</label>\r\n                    <input\r\n                        type='text'\r\n                        className='form-control'\r\n                        value={nombre}\r\n                        onChange={(e) => setNombre(e.target.value)}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className='mb-3'>\r\n                    <label className='form-label'>Email</label>\r\n                    <input\r\n                        type='email'\r\n                        className='form-control'\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className='mb-3'>\r\n                    <label className='form-label'>Contraseña</label>\r\n                    <input\r\n                        type='password'\r\n                        className='form-control'\r\n                        value={contrasena}\r\n                        onChange={(e) => setContrasena(e.target.value)}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className='mb-3'>\r\n                    <label className='form-label'>ID de Rol (Opcional)</label>\r\n                    <select\r\n                        className='form-select'\r\n                        value={idRol}\r\n                        onChange={(e) => setIdRol(e.target.value)}\r\n                    >\r\n                        <option value=\"\">Seleccionar rol</option>\r\n                        <option value=\"1\">Administrador</option>\r\n                        <option value=\"2\">Usuario</option>\r\n                    </select>\r\n                </div>\r\n                <button type='submit' className='btn btn-primary'>\r\n                    Crear\r\n                </button>\r\n            </form>\r\n\r\n            {/* Modal de confirmación */}\r\n            <Modal show={showModal} onHide={handleClose} centered>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{message.startsWith(\"Error\") ? \"¡Error!\" : \"¡Éxito!\"}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>{message}</Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"primary\" onClick={handleClose}>\r\n                        Aceptar\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CompCreateUsuario;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}