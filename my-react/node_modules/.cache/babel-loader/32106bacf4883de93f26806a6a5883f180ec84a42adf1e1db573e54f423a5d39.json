{"ast":null,"code":"import axios from'axios';import'./EditLibro.css';import{useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import{Modal,Button}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const URI='http://localhost:8000/libros';const CompEditLibro=()=>{const[titulo,setTitulo]=useState('');const[autor,setAutor]=useState('');const[isbn,setIsbn]=useState('');const[categoria,setCategoria]=useState('');const[cantidad,setCantidad]=useState('');const[disponible,setDisponible]=useState(true);const[showModal,setShowModal]=useState(false);// Control del modal\nconst{id_libro}=useParams();const navigate=useNavigate();// Procedimiento para actualizar\nconst update=async e=>{e.preventDefault();const token=localStorage.getItem('token');try{await axios.put(`${URI}/${id_libro}`,{titulo:titulo,autor:autor,isbn:isbn,categoria:categoria,cantidad:cantidad,disponible:disponible},{headers:{Authorization:`Bearer ${token}`}});setShowModal(true);// Mostrar el modal después de editar\n}catch(error){console.error('Error al actualizar el libro:',error);if(error.response){console.log('Código de estado:',error.response.status);console.log('Mensaje de error:',error.response.data);}}};const handleClose=()=>{setShowModal(false);navigate('/libros');// Redirigir después de cerrar el modal\n};useEffect(()=>{getLibroById_libro();},[]);const getLibroById_libro=async()=>{const res=await axios.get(`${URI}/${id_libro}`);setTitulo(res.data.titulo);setAutor(res.data.autor);setIsbn(res.data.isbn);setCategoria(res.data.categoria);setCantidad(res.data.cantidad);setDisponible(res.data.disponible);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Editar libro\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:update,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"T\\xEDtulo\"}),/*#__PURE__*/_jsx(\"input\",{value:titulo,onChange:e=>setTitulo(e.target.value),type:\"text\",className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Autor\"}),/*#__PURE__*/_jsx(\"input\",{value:autor,onChange:e=>setAutor(e.target.value),type:\"text\",className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"ISBN\"}),/*#__PURE__*/_jsx(\"input\",{value:isbn,onChange:e=>setIsbn(Number(e.target.value)),type:\"number\",className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Categor\\xEDa\"}),/*#__PURE__*/_jsx(\"input\",{value:categoria,onChange:e=>setCategoria(e.target.value),type:\"text\",className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Cantidad\"}),/*#__PURE__*/_jsx(\"input\",{value:cantidad,onChange:e=>setCantidad(Number(e.target.value)),type:\"number\",className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Disponible\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:disponible,onChange:()=>setDisponible(!disponible)})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Actualizar\"})]}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:handleClose,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"\\xA1Libro Actualizado!\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:\"El libro ha sido editado correctamente.\"}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleClose,children:\"Aceptar\"})})]})]});};export default CompEditLibro;","map":{"version":3,"names":["axios","useEffect","useState","useNavigate","useParams","Modal","Button","jsx","_jsx","jsxs","_jsxs","URI","CompEditLibro","titulo","setTitulo","autor","setAutor","isbn","setIsbn","categoria","setCategoria","cantidad","setCantidad","disponible","setDisponible","showModal","setShowModal","id_libro","navigate","update","e","preventDefault","token","localStorage","getItem","put","headers","Authorization","error","console","response","log","status","data","handleClose","getLibroById_libro","res","get","className","children","onSubmit","value","onChange","target","type","Number","checked","show","onHide","centered","Header","closeButton","Title","Body","Footer","variant","onClick"],"sources":["C:/BibliotecaPublica/my-react/src/libro/EditLibro.js"],"sourcesContent":["import axios from 'axios';\r\nimport './EditLibro.css';\r\nimport { useEffect, useState } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\nconst URI = 'http://localhost:8000/libros';\r\n\r\nconst CompEditLibro = () => {\r\n  const [titulo, setTitulo] = useState('');\r\n  const [autor, setAutor] = useState('');\r\n  const [isbn, setIsbn] = useState('');\r\n  const [categoria, setCategoria] = useState('');\r\n  const [cantidad, setCantidad] = useState('');\r\n  const [disponible, setDisponible] = useState(true);\r\n  const [showModal, setShowModal] = useState(false); // Control del modal\r\n  const { id_libro } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  // Procedimiento para actualizar\r\n  const update = async (e) => {\r\n    e.preventDefault();\r\n    const token = localStorage.getItem('token');\r\n    try {\r\n      await axios.put(\r\n        `${URI}/${id_libro}`,\r\n        {\r\n          titulo: titulo,\r\n          autor: autor,\r\n          isbn: isbn,\r\n          categoria: categoria,\r\n          cantidad: cantidad,\r\n          disponible: disponible,\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      setShowModal(true); // Mostrar el modal después de editar\r\n    } catch (error) {\r\n      console.error('Error al actualizar el libro:', error);\r\n      if (error.response) {\r\n        console.log('Código de estado:', error.response.status);\r\n        console.log('Mensaje de error:', error.response.data);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setShowModal(false);\r\n    navigate('/libros'); // Redirigir después de cerrar el modal\r\n  };\r\n\r\n  useEffect(() => {\r\n    getLibroById_libro();\r\n  }, []);\r\n\r\n  const getLibroById_libro = async () => {\r\n    const res = await axios.get(`${URI}/${id_libro}`);\r\n    setTitulo(res.data.titulo);\r\n    setAutor(res.data.autor);\r\n    setIsbn(res.data.isbn);\r\n    setCategoria(res.data.categoria);\r\n    setCantidad(res.data.cantidad);\r\n    setDisponible(res.data.disponible);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1 className=\"title\">Editar libro</h1>\r\n      <form onSubmit={update}>\r\n        <div className=\"form-grid\">\r\n          <div className=\"mb-3\">\r\n            <label className=\"form-label\">Título</label>\r\n            <input\r\n              value={titulo}\r\n              onChange={(e) => setTitulo(e.target.value)}\r\n              type=\"text\"\r\n              className=\"form-input\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label className=\"form-label\">Autor</label>\r\n            <input\r\n              value={autor}\r\n              onChange={(e) => setAutor(e.target.value)}\r\n              type=\"text\"\r\n              className=\"form-input\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label className=\"form-label\">ISBN</label>\r\n            <input\r\n              value={isbn}\r\n              onChange={(e) => setIsbn(Number(e.target.value))}\r\n              type=\"number\"\r\n              className=\"form-input\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label className=\"form-label\">Categoría</label>\r\n            <input\r\n              value={categoria}\r\n              onChange={(e) => setCategoria(e.target.value)}\r\n              type=\"text\"\r\n              className=\"form-input\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label className=\"form-label\">Cantidad</label>\r\n            <input\r\n              value={cantidad}\r\n              onChange={(e) => setCantidad(Number(e.target.value))}\r\n              type=\"number\"\r\n              className=\"form-input\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label className=\"form-label\">Disponible</label>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={disponible}\r\n              onChange={() => setDisponible(!disponible)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <button type=\"submit\" className=\"submit-button\">\r\n          Actualizar\r\n        </button>\r\n      </form>\r\n\r\n      {/* Modal de confirmación */}\r\n      <Modal show={showModal} onHide={handleClose} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>¡Libro Actualizado!</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>El libro ha sido editado correctamente.</Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={handleClose}>\r\n            Aceptar\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CompEditLibro;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,iBAAiB,CACxB,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,OAASC,KAAK,CAAEC,MAAM,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,GAAG,CAAG,8BAA8B,CAE1C,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACe,IAAI,CAAEC,OAAO,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACiB,SAAS,CAAEC,YAAY,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACmB,QAAQ,CAAEC,WAAW,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACqB,UAAU,CAAEC,aAAa,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CAClD,KAAM,CAACuB,SAAS,CAAEC,YAAY,CAAC,CAAGxB,QAAQ,CAAC,KAAK,CAAC,CAAE;AACnD,KAAM,CAAEyB,QAAS,CAAC,CAAGvB,SAAS,CAAC,CAAC,CAChC,KAAM,CAAAwB,QAAQ,CAAGzB,WAAW,CAAC,CAAC,CAE9B;AACA,KAAM,CAAA0B,MAAM,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CACF,KAAM,CAAAlC,KAAK,CAACmC,GAAG,CACb,GAAGxB,GAAG,IAAIgB,QAAQ,EAAE,CACpB,CACEd,MAAM,CAAEA,MAAM,CACdE,KAAK,CAAEA,KAAK,CACZE,IAAI,CAAEA,IAAI,CACVE,SAAS,CAAEA,SAAS,CACpBE,QAAQ,CAAEA,QAAQ,CAClBE,UAAU,CAAEA,UACd,CAAC,CACD,CACEa,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUL,KAAK,EAChC,CACF,CACF,CAAC,CACDN,YAAY,CAAC,IAAI,CAAC,CAAE;AACtB,CAAE,MAAOY,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrD,GAAIA,KAAK,CAACE,QAAQ,CAAE,CAClBD,OAAO,CAACE,GAAG,CAAC,mBAAmB,CAAEH,KAAK,CAACE,QAAQ,CAACE,MAAM,CAAC,CACvDH,OAAO,CAACE,GAAG,CAAC,mBAAmB,CAAEH,KAAK,CAACE,QAAQ,CAACG,IAAI,CAAC,CACvD,CACF,CACF,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxBlB,YAAY,CAAC,KAAK,CAAC,CACnBE,QAAQ,CAAC,SAAS,CAAC,CAAE;AACvB,CAAC,CAED3B,SAAS,CAAC,IAAM,CACd4C,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAA9C,KAAK,CAAC+C,GAAG,CAAC,GAAGpC,GAAG,IAAIgB,QAAQ,EAAE,CAAC,CACjDb,SAAS,CAACgC,GAAG,CAACH,IAAI,CAAC9B,MAAM,CAAC,CAC1BG,QAAQ,CAAC8B,GAAG,CAACH,IAAI,CAAC5B,KAAK,CAAC,CACxBG,OAAO,CAAC4B,GAAG,CAACH,IAAI,CAAC1B,IAAI,CAAC,CACtBG,YAAY,CAAC0B,GAAG,CAACH,IAAI,CAACxB,SAAS,CAAC,CAChCG,WAAW,CAACwB,GAAG,CAACH,IAAI,CAACtB,QAAQ,CAAC,CAC9BG,aAAa,CAACsB,GAAG,CAACH,IAAI,CAACpB,UAAU,CAAC,CACpC,CAAC,CAED,mBACEb,KAAA,QAAKsC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBzC,IAAA,OAAIwC,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cACvCvC,KAAA,SAAMwC,QAAQ,CAAErB,MAAO,CAAAoB,QAAA,eACrBvC,KAAA,QAAKsC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBvC,KAAA,QAAKsC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzC,IAAA,UAAOwC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,WAAM,CAAO,CAAC,cAC5CzC,IAAA,UACE2C,KAAK,CAAEtC,MAAO,CACduC,QAAQ,CAAGtB,CAAC,EAAKhB,SAAS,CAACgB,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE,CAC3CG,IAAI,CAAC,MAAM,CACXN,SAAS,CAAC,YAAY,CACvB,CAAC,EACC,CAAC,cACNtC,KAAA,QAAKsC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzC,IAAA,UAAOwC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,OAAK,CAAO,CAAC,cAC3CzC,IAAA,UACE2C,KAAK,CAAEpC,KAAM,CACbqC,QAAQ,CAAGtB,CAAC,EAAKd,QAAQ,CAACc,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE,CAC1CG,IAAI,CAAC,MAAM,CACXN,SAAS,CAAC,YAAY,CACvB,CAAC,EACC,CAAC,cACNtC,KAAA,QAAKsC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzC,IAAA,UAAOwC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,MAAI,CAAO,CAAC,cAC1CzC,IAAA,UACE2C,KAAK,CAAElC,IAAK,CACZmC,QAAQ,CAAGtB,CAAC,EAAKZ,OAAO,CAACqC,MAAM,CAACzB,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAC,CAAE,CACjDG,IAAI,CAAC,QAAQ,CACbN,SAAS,CAAC,YAAY,CACvB,CAAC,EACC,CAAC,cACNtC,KAAA,QAAKsC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzC,IAAA,UAAOwC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,cAAS,CAAO,CAAC,cAC/CzC,IAAA,UACE2C,KAAK,CAAEhC,SAAU,CACjBiC,QAAQ,CAAGtB,CAAC,EAAKV,YAAY,CAACU,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE,CAC9CG,IAAI,CAAC,MAAM,CACXN,SAAS,CAAC,YAAY,CACvB,CAAC,EACC,CAAC,cACNtC,KAAA,QAAKsC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzC,IAAA,UAAOwC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,UAAQ,CAAO,CAAC,cAC9CzC,IAAA,UACE2C,KAAK,CAAE9B,QAAS,CAChB+B,QAAQ,CAAGtB,CAAC,EAAKR,WAAW,CAACiC,MAAM,CAACzB,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAC,CAAE,CACrDG,IAAI,CAAC,QAAQ,CACbN,SAAS,CAAC,YAAY,CACvB,CAAC,EACC,CAAC,cACNtC,KAAA,QAAKsC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzC,IAAA,UAAOwC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,YAAU,CAAO,CAAC,cAChDzC,IAAA,UACE8C,IAAI,CAAC,UAAU,CACfE,OAAO,CAAEjC,UAAW,CACpB6B,QAAQ,CAAEA,CAAA,GAAM5B,aAAa,CAAC,CAACD,UAAU,CAAE,CAC5C,CAAC,EACC,CAAC,EACH,CAAC,cACNf,IAAA,WAAQ8C,IAAI,CAAC,QAAQ,CAACN,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,YAEhD,CAAQ,CAAC,EACL,CAAC,cAGPvC,KAAA,CAACL,KAAK,EAACoD,IAAI,CAAEhC,SAAU,CAACiC,MAAM,CAAEd,WAAY,CAACe,QAAQ,MAAAV,QAAA,eACnDzC,IAAA,CAACH,KAAK,CAACuD,MAAM,EAACC,WAAW,MAAAZ,QAAA,cACvBzC,IAAA,CAACH,KAAK,CAACyD,KAAK,EAAAb,QAAA,CAAC,wBAAmB,CAAa,CAAC,CAClC,CAAC,cACfzC,IAAA,CAACH,KAAK,CAAC0D,IAAI,EAAAd,QAAA,CAAC,yCAAuC,CAAY,CAAC,cAChEzC,IAAA,CAACH,KAAK,CAAC2D,MAAM,EAAAf,QAAA,cACXzC,IAAA,CAACF,MAAM,EAAC2D,OAAO,CAAC,SAAS,CAACC,OAAO,CAAEtB,WAAY,CAAAK,QAAA,CAAC,SAEhD,CAAQ,CAAC,CACG,CAAC,EACV,CAAC,EACL,CAAC,CAEV,CAAC,CAED,cAAe,CAAArC,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}