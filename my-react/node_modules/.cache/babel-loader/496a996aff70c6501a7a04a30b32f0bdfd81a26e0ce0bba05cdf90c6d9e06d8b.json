{"ast":null,"code":"import axios from'axios';import{useState,useEffect}from'react';import{Link}from'react-router-dom';import{Modal,Button}from'react-bootstrap';import'./ShowLibros.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const URI='http://localhost:8000/libros';const CompShowLibros=()=>{const[libros,setLibro]=useState([]);const[showModal,setShowModal]=useState(false);// Estado para el modal\nconst[message,setMessage]=useState('');// Mensaje del modal\nconst[bookToDelete,setBookToDelete]=useState(null);// ID del libro a eliminar\nuseEffect(()=>{getLibros();},[]);const getLibros=async()=>{const res=await axios.get(URI);setLibro(res.data);};const deleteLibro=async id_libro=>{const token=localStorage.getItem('token');try{await axios.delete(`${URI}/${id_libro}`,{headers:{'Authorization':`Bearer ${token}`}});setMessage('Libro eliminado con éxito');setShowModal(true);// Mostrar modal de éxito\ngetLibros();// Actualizar la lista de libros\n}catch(error){console.error('Error al eliminar el libro:',error);if(error.response){console.log('Código de estado:',error.response.status);console.log('Mensaje de error:',error.response.data);}setMessage('Hubo un error al eliminar el libro');setShowModal(true);// Mostrar modal de error\n}};const handleClose=()=>{setShowModal(false);// Cerrar el modal\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"vista-libros-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gesti\\xF3n de Libros\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(Link,{to:\"/create\",className:\"btn-crear-libro mb-3\",children:\"Crear Libro\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table-libros\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"T\\xEDtulo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Autor\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ISBN\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Categor\\xEDa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cantidad\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Disponible\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:libros.map(libro=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:libro.titulo}),/*#__PURE__*/_jsx(\"td\",{children:libro.autor}),/*#__PURE__*/_jsx(\"td\",{children:libro.isbn}),/*#__PURE__*/_jsx(\"td\",{children:libro.categoria}),/*#__PURE__*/_jsx(\"td\",{children:libro.cantidad}),/*#__PURE__*/_jsx(\"td\",{children:libro.disponible?'Sí':'No'}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",role:\"group\",children:[/*#__PURE__*/_jsx(Link,{to:`/edit/${libro.id_libro}`,className:\"editar-btn \",children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteLibro(libro.id_libro),className:\"eliminar-btn\",children:\"Eliminar\"})]})})]},libro.id_libro))})]})})]})}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:handleClose,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:message.startsWith('Error')?'¡Error!':'¡Éxito!'})}),/*#__PURE__*/_jsx(Modal.Body,{children:message}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleClose,children:\"Aceptar\"})})]})]});};export default CompShowLibros;","map":{"version":3,"names":["axios","useState","useEffect","Link","Modal","Button","jsx","_jsx","jsxs","_jsxs","URI","CompShowLibros","libros","setLibro","showModal","setShowModal","message","setMessage","bookToDelete","setBookToDelete","getLibros","res","get","data","deleteLibro","id_libro","token","localStorage","getItem","delete","headers","error","console","response","log","status","handleClose","className","children","to","map","libro","titulo","autor","isbn","categoria","cantidad","disponible","role","onClick","show","onHide","centered","Header","closeButton","Title","startsWith","Body","Footer","variant"],"sources":["C:/BibliotecaPublica/my-react/src/libro/ShowLibros.js"],"sourcesContent":["import axios from 'axios';\r\nimport { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport './ShowLibros.css';\r\n\r\nconst URI = 'http://localhost:8000/libros';\r\n\r\nconst CompShowLibros = () => {\r\n    const [libros, setLibro] = useState([]);\r\n    const [showModal, setShowModal] = useState(false); // Estado para el modal\r\n    const [message, setMessage] = useState(''); // Mensaje del modal\r\n    const [bookToDelete, setBookToDelete] = useState(null); // ID del libro a eliminar\r\n\r\n    useEffect(() => {\r\n        getLibros();\r\n    }, []);\r\n\r\n    const getLibros = async () => {\r\n        const res = await axios.get(URI);\r\n        setLibro(res.data);\r\n    };\r\n\r\n    const deleteLibro = async (id_libro) => {\r\n        const token = localStorage.getItem('token');\r\n        try {\r\n            await axios.delete(`${URI}/${id_libro}`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                },\r\n            });\r\n            setMessage('Libro eliminado con éxito');\r\n            setShowModal(true);  // Mostrar modal de éxito\r\n            getLibros(); // Actualizar la lista de libros\r\n        } catch (error) {\r\n            console.error('Error al eliminar el libro:', error);\r\n            if (error.response) {\r\n                console.log('Código de estado:', error.response.status);\r\n                console.log('Mensaje de error:', error.response.data);\r\n            }\r\n            setMessage('Hubo un error al eliminar el libro');\r\n            setShowModal(true);  // Mostrar modal de error\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setShowModal(false);  // Cerrar el modal\r\n    };\r\n\r\n    return (\r\n        <div className=\"vista-libros-container\">\r\n            <h2>Gestión de Libros</h2>\r\n            <div className=\"row\">\r\n                <div className=\"col\">\r\n                    <Link to=\"/create\" className=\"btn-crear-libro mb-3\">\r\n                        Crear Libro\r\n                    </Link>\r\n\r\n                    {/* Contenedor para hacer la tabla responsiva */}\r\n                    <div className=\"table-responsive\">\r\n                        <table className=\"table-libros\">\r\n                            <thead className=\"text-center\">\r\n                                <tr>\r\n                                    <th>Título</th>\r\n                                    <th>Autor</th>\r\n                                    <th>ISBN</th>\r\n                                    <th>Categoría</th>\r\n                                    <th>Cantidad</th>\r\n                                    <th>Disponible</th>\r\n                                    <th>Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {libros.map((libro) => (\r\n                                    <tr key={libro.id_libro}>\r\n                                        <td>{libro.titulo}</td>\r\n                                        <td>{libro.autor}</td>\r\n                                        <td>{libro.isbn}</td>\r\n                                        <td>{libro.categoria}</td>\r\n                                        <td>{libro.cantidad}</td>\r\n                                        <td>{libro.disponible ? 'Sí' : 'No'}</td>\r\n                                        <td className=\"text-center\">\r\n                                            <div className=\"btn-group\" role=\"group\">\r\n                                                <Link\r\n                                                    to={`/edit/${libro.id_libro}`}\r\n                                                    className=\"editar-btn \"\r\n                                                >\r\n                                                    Editar\r\n                                                </Link>\r\n                                                <button\r\n                                                    onClick={() => deleteLibro(libro.id_libro)}\r\n                                                    className=\"eliminar-btn\"\r\n                                                >\r\n                                                    Eliminar\r\n                                                </button>\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    {/* Fin del contenedor responsivo */}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Modal de confirmación */}\r\n            <Modal show={showModal} onHide={handleClose} centered>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{message.startsWith('Error') ? '¡Error!' : '¡Éxito!'}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>{message}</Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"primary\" onClick={handleClose}>\r\n                        Aceptar\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CompShowLibros;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}