{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import axios from\"axios\";import\"./ResultadoBusqueda.css\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const CompResultadosBusqueda=()=>{const{termino}=useParams();// Obtiene el término de búsqueda de la URL\nconst[libros,setLibros]=useState([]);// Estado para almacenar los resultados\nconst[error,setError]=useState(\"\");// Estado para almacenar el error\nconst[isLoading,setIsLoading]=useState(true);// Estado para manejar la carga\nconst navigate=useNavigate();useEffect(()=>{const fetchLibros=async()=>{try{const response=await axios.get(`http://localhost:8000/libros/buscar/${termino}`);setLibros(response.data);// Almacena los libros obtenidos\n}catch(err){setError(\"Error al cargar los libros.\");// En caso de error, muestra un mensaje\n}finally{setIsLoading(false);// Termina la carga\n}};fetchLibros();// Llama a la función para obtener los libros cuando se monta el componente\n},[termino]);// Función para redirigir al formulario de reserva y préstamo del libro\nconst handleReservar=(id_libro,titulo)=>{navigate(`/reservar/${id_libro}`,{state:{titulo}});};const handlePedirPrestado=id_libro=>{navigate(`/prestar/${id_libro}`);};return/*#__PURE__*/_jsxs(\"div\",{className:\"resultado-bus-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"resultado-title\",children:[\"Resultados de la b\\xFAsqueda \",termino?`para \"${termino}\"`:\"\"]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),libros.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"resultado-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Autor\"}),/*#__PURE__*/_jsx(\"th\",{children:\"T\\xEDtulo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Acci\\xF3n\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:libros.map(libro=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:libro.autor}),/*#__PURE__*/_jsx(\"td\",{children:libro.titulo}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-reservar\",onClick:()=>handleReservar(libro.id_libro,libro.titulo)// Redirige al formulario de reserva\n,children:\"Reservar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-prestar\",onClick:()=>handlePedirPrestado(libro.id_libro,libro.titulo)// Redirige al formulario de préstamo\n,children:\"Pedir prestado\"})]})]},libro.id_libro))})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-muted\",children:termino?`No se encontraron libros para \"${termino}\"`:\"Realiza una búsqueda para ver resultados.\"})]});};export default CompResultadosBusqueda;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","jsxs","_jsxs","jsx","_jsx","CompResultadosBusqueda","termino","libros","setLibros","error","setError","isLoading","setIsLoading","navigate","fetchLibros","response","get","data","err","handleReservar","id_libro","titulo","state","handlePedirPrestado","className","children","length","map","libro","autor","onClick"],"sources":["C:/BibliotecaPublica/my-react/src/components/ResultadoBusqueda.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"./ResultadoBusqueda.css\"; \r\n\r\nconst CompResultadosBusqueda = () => {\r\n  const { termino } = useParams(); // Obtiene el término de búsqueda de la URL\r\n  const [libros, setLibros] = useState([]); // Estado para almacenar los resultados\r\n  const [error, setError] = useState(\"\"); // Estado para almacenar el error\r\n  const [isLoading, setIsLoading] = useState(true); // Estado para manejar la carga\r\n  const navigate = useNavigate(); \r\n\r\n  useEffect(() => {\r\n    const fetchLibros = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:8000/libros/buscar/${termino}`);\r\n        setLibros(response.data); // Almacena los libros obtenidos\r\n      } catch (err) {\r\n        setError(\"Error al cargar los libros.\"); // En caso de error, muestra un mensaje\r\n      } finally {\r\n        setIsLoading(false); // Termina la carga\r\n      }\r\n    };\r\n\r\n    fetchLibros(); // Llama a la función para obtener los libros cuando se monta el componente\r\n  }, [termino]);\r\n\r\n  // Función para redirigir al formulario de reserva y préstamo del libro\r\n  const handleReservar = (id_libro, titulo) => {\r\n    navigate(`/reservar/${id_libro}`, { state: { titulo } });\r\n  };\r\n  \r\n  \r\n  const handlePedirPrestado = (id_libro) => {\r\n    navigate(`/prestar/${id_libro}`);\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"resultado-bus-container\">\r\n      <h2 className=\"resultado-title\">\r\n        Resultados de la búsqueda {termino ? `para \"${termino}\"` : \"\"}\r\n      </h2>\r\n\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n\r\n      {libros.length > 0 ? (\r\n        <table className=\"resultado-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Autor</th>\r\n              <th>Título</th>\r\n              <th>Acción</th> \r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {libros.map((libro) => (\r\n              <tr key={libro.id_libro}>\r\n                <td>{libro.autor}</td>\r\n                <td>{libro.titulo}</td>\r\n                <td>\r\n                  <button\r\n                    className=\"btn-reservar\"\r\n                    onClick={() => handleReservar(libro.id_libro, libro.titulo)} // Redirige al formulario de reserva\r\n                  >\r\n                    Reservar\r\n                  </button>\r\n                  <button\r\n                    className=\"btn-prestar\"\r\n                    onClick={() => handlePedirPrestado(libro.id_libro, libro.titulo)} // Redirige al formulario de préstamo\r\n                  >\r\n                    Pedir prestado\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      ) : (\r\n        <p className=\"text-center text-muted\">\r\n          {termino ? `No se encontraron libros para \"${termino}\"` : \"Realiza una búsqueda para ver resultados.\"}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CompResultadosBusqueda;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}